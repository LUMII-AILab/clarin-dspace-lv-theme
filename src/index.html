<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>LINDAT/CLARIN Research Infrastructure</title>
    <meta name="viewport" content="width=device-width">
    <meta name="keywords" content="Language Resources, Infrastructure, Research,
          Natural Language Processing, Multimedia, Czech language, Computational
          Linguistics, Speech, Text, Corpus, Corpora" />
    <meta name="description" content="LINDAT CLARIN Research Infrastructure" />
    <!-- inject:css-->
    <!-- css files will be automatically insert here-->
    <!-- endinject-->
    <style>
      body {
        display: flex;
        min-height: 100vh;
        flex-direction: column;
      }
      section {
        flex: 1;
      }
    </style>
  </head>
  <body id="lindat-home">
    <!-- HEADER -->
    <header>
    </header>
    <section class="lindat lindat-container">
      <h1>LINDAT/CLARIN Common Theme</h1>
      <p>
        Select the theme you want...
      </p>
      <p>
        <label for="lang-select">Select Language:</label>
        <select id="lang-select">
          <option value="en">English</option>
          <option value="cs">Czech</option>
        </select>
      </p>
      <p>
        <label for="selector">Select active project:</label>
        <select id="selector">
          <option value="lindat-home">Home</option>
          <option value="lindat-repository">Repository</option>
          <option value="lindat-pmltq">PML-TQ</option>
          <option value="lindat-tools">Any</option>
        </select>
      </p>
    </section>
    <footer>
    </footer>
    <script>
      function ajax(selector, url) {
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function () {
          if (xmlhttp.readyState == XMLHttpRequest.DONE) {
            if (xmlhttp.status == 200) {
              document.querySelector(selector).innerHTML = xmlhttp.responseText;
            } else if (xmlhttp.status == 404) {
              alert('Template not found');
            } else {
              alert('GET: ' + url + '\nReturned: '+xmlhttp.status);
            }
          }
        };
        xmlhttp.open('GET', url, true);
        xmlhttp.send();
      }

      function switchLang(lang) {
        ajax('header', '/' + lang + '/partials/header.html');
        ajax('footer', '/' + lang + '/partials/footer.html');
      }

      function init() {
        var langSelect = document.getElementById('lang-select');
        var selector = document.getElementById('selector');

        langSelect.addEventListener('change', function() {
          localStorage.setItem('lang', this.value);
          switchLang(this.value);
        });

        selector.addEventListener('change', function () {
          localStorage.setItem('project', this.value);
          document.body.setAttribute('id', this.value);
        });

        var lang = localStorage.getItem('lang') || 'en';
        var project = localStorage.getItem('project') || 'lindat-home';

        langSelect.value = lang;
        selector.value = project;

        document.body.setAttribute('id', project);
        switchLang(localStorage.getItem('lang') || 'en');
      }

      init();
    </script>
  </body>
</html>
